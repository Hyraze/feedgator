{"version":3,"sources":["webpack:///./src/pages/index.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_string-html.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.string.link.js"],"names":["HomePage","data","className","role","window","flatten","arr","output","i","length","Array","isArray","concat","push","Object","keys","oneGraph","map","feedTitle","feed","rss2Feed","items","post","source","title","content","sort","postA","pubDate","date","hours","minutes","ampm","strTime","titleKebab","split","word","toLowerCase","join","localData","localStorage","getItem","key","href","link","onClick","localOpenedArticles","JSON","parse","includes","setItem","stringify","target","rel","Date","getHours","getMinutes","getDate","getMonth","getFullYear","query","$export","fails","defined","quot","createHTML","string","tag","attribute","value","S","String","p1","replace","module","exports","NAME","exec","O","P","F","test","url","this"],"mappings":"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","file":"component---src-pages-index-js-b305385d76cfd5f6628f.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { graphql } from 'gatsby'\nimport '../styles/tachyons.min.css'\n\nconst formatDate = (date) => {\n  let hours = date.getHours()\n  let minutes = date.getMinutes()\n  const ampm = hours >= 12 ? 'pm' : 'am'\n  hours = hours % 12\n  hours = hours || 12\n  minutes = minutes < 10 ? '0' + minutes : minutes\n  const strTime = hours + ':' + minutes + ' ' + ampm\n  return `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()} ${strTime}`\n}\n\nconst flatten = (arr) => {\n  let output = []\n  for (var i = 0; i < arr.length; i++) {\n    if (Array.isArray(arr[i])) {\n      output = output.concat(flatten(arr[i]))\n    } else {\n      output.push(arr[i])\n    }\n  }\n  return output\n}\n\nconst getLocalData = () => localStorage.getItem('opened_articles')\n\nexport const HomePage = ({ data }) => {\n  return (<div className=\"lh-copy mw6 center ph3\">\n    <header className=\"tc\">\n      <h1 className=\"f1 lh-title mb0\">Feedgator</h1>\n      <h2 className=\"f5 fw1\">\n      Trending articles and repositories from my selected choice portals(Firefox,Github Trending,CSS Tricks,CSS Wizardy)\n      </h2>\n    </header>\n    <main role=\"main\">\n      <ul className=\"list pa0\">\n        {\n          typeof window !== 'undefined'\n            ? flatten(Object.keys(data.oneGraph)\n              .map(feedTitle => {\n                const { rss2Feed: feed } = data.oneGraph[feedTitle]\n                return feed.items\n                  .map(post => ({\n                    source: feed.title,\n                    content: post\n                  }))\n              }))\n              .sort(({ content: postA }, { content: postB }) => {\n                return postB.pubDate - postA.pubDate\n              })\n              .map(({ source, content }) => {\n                const titleKebab = content.title.split(' ').map(word => word.toLowerCase()).join('-')\n                const localData = getLocalData()\n\n                return (\n                  <li\n                    key={titleKebab}\n                    className=\"pv3 dim\"\n                  >\n                    <a\n                      href={content.link}\n                      onClick={() => {\n                        if (localData) {\n                          const { data: localOpenedArticles } = JSON.parse(localData)\n\n                          if (!localOpenedArticles.includes(titleKebab)) {\n                            localStorage.setItem('opened_articles', JSON.stringify({\n                              data: [titleKebab, ...localOpenedArticles]\n                            }))\n                          }\n                        } else {\n                          localStorage.setItem('opened_articles', JSON.stringify({\n                            data: [titleKebab]\n                          }))\n                        }\n                      }}\n                      className={`link near-black ${localData ? JSON.parse(localData).data.includes(titleKebab) ? 'strike' : '' : ''}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      <small>\n                        {formatDate(new Date(content.pubDate))}\n                      </small>\n                      <h3 className=\"ma0\">{content.title}</h3>\n                    </a>\n                  </li>\n                )\n              }) : null\n        }\n      </ul>\n    </main>\n    <footer></footer>\n  </div>\n  )\n}\nHomePage.propTypes = {\n  data: PropTypes.shape({\n    oneGraph: PropTypes.objectOf(\n      PropTypes.shape({\n        rss2Feed: PropTypes.shape({\n          items: PropTypes.arrayOf(\n            PropTypes.shape({\n              link: PropTypes.string.isRequired,\n              pubDate: PropTypes.number.isRequired,\n              title: PropTypes.string.isRequired\n            }).isRequired\n          ),\n          title: PropTypes.string.isRequired\n        }).isRequired\n      }).isRequired\n    ).isRequired\n  }).isRequired\n}\n\nexport default HomePage\n\nexport const query = graphql`\n  {\n    oneGraph {\n      mozilla: rss {\n        rss2Feed(url: \"https://hacks.mozilla.org/feed/\") {\n          ...RSSFeedFragment\n        }\n      }\n      cssWizardry: rss {\n        rss2Feed(url: \"https://csswizardry.com/feed\") {\n          ...RSSFeedFragment\n        }\n      }\n      github: rss {\n        rss2Feed(url: \"http://feeds.feedburner.com/gitrepos?fmt=xml\") {\n          ...RSSFeedFragment\n        }\n      }\n      csstrick: rss {\n        rss2Feed(url: \"http://feeds.feedburner.com/CssTricks\") {\n          ...RSSFeedFragment\n        }\n      }\n    \n    }\n  }\n\n  fragment RSSFeedFragment on ONEGRAPH_Rss2Channel {\n    title\n    items {\n      title\n      link\n      pubDate\n    }\n  }\n`\n","var $export = require('./_export');\nvar fails = require('./_fails');\nvar defined = require('./_defined');\nvar quot = /\"/g;\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\nvar createHTML = function (string, tag, attribute, value) {\n  var S = String(defined(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\nmodule.exports = function (NAME, exec) {\n  var O = {};\n  O[NAME] = exec(createHTML);\n  $export($export.P + $export.F * fails(function () {\n    var test = ''[NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  }), 'String', O);\n};\n","'use strict';\n// B.2.3.10 String.prototype.link(url)\nrequire('./_string-html')('link', function (createHTML) {\n  return function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  };\n});\n"],"sourceRoot":""}